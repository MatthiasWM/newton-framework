
0001C11C EA05C73C ...< | B        TPolygonView::ClassID() const
0001C120 EA05C976 ...v | B        TPolygonView::DerivedFrom(long) const
0001C124 EA0DBD0A .... | B        &0038B554
0001C128 EA69FB0D .i.. | B        TxObject::Key() const
0001C12C EA69D1CA .i.. | B        TView::DoCommand(RefArg)
0001C130 EA6EB4E8 .n.. | B        TView::Constructor(RefArg, TView*)
0001C134 EA6B2C9B .k,. | B        TView::Delete()
0001C138 EA6A0F91 .j.. | B        TPolygonView::RealDoCommand(RefArg)
0001C13C EA6B2C9A .k,. | B        TView::TextFlags() const
0001C140 EA6A2C91 .j,. | B        TPolygonView::OuterBounds(TRect*)
0001C144 EA6EBD0D .n.. | B        TView::InsideView(TPoint&)
0001C148 EA6EBD27 .n.' | B        TView::SetBounds(const TRect&)
0001C14C EA6EB4D9 .n.. | B        TView::ChildBoundsChanged(TView*, TRect&)
0001C150 EA6EC12D .n.- | B        TView::SetupForm()
0001C154 EA6B0334 .k.4 | B        TView::SetupDone()
0001C158 EA6EB905 .n.. | B        TView::Hide()
0001C15C EA6B2C97 .k,. | B        TView::GetRangeText(long, long)
0001C160 EA6EB8FB .n.. | B        TView::GetValue(RefArg, RefArg)
0001C164 EA6EC12A .n.* | B        TView::SetValue(RefArg, RefArg)
0001C168 EA6EB4CF .n.. | B        TView::Changed(RefArg)
0001C16C EA6EB4CF .n.. | B        TView::Changed(RefArg, RefArg)
0001C170 EA6EB4DD .n.. | B        TView::Dirty(const TRect*)
0001C174 EA6EB8FF .n.. | B        TView::Hilite(unsigned char)
0001C178 EA093948 ..9H | B        TView::SetCaretOffset(long*, long*)
0001C17C EA6B2C8D .k,. | B        TView::SetSelection(RefArg, long*, long*)
0001C180 EA6B2C8B .k,. | B        TView::GetSelection()
0001C184 EA6B2C8C .k,. | B        TView::ActivateSelection(unsigned char)
0001C188 EA6B1C0F .k.. | B        TView::DoEditCommand(long)
0001C18C EA6EBD02 .n.. | B        TView::OffsetToCaret(long, TRect*)
0001C190 EA6EBD04 .n.. | B        TView::PointToCaret(TPoint&, TRect*, TRect*)
0001C194 EA6AFF17 .j.. | B        TView::NarrowVisByIntersectingObscuringSiblingsAndUncles(TView*, TRect*)
0001C198 EA6EBD09 .n.. | B        TView::RemoveAllViews()
0001C19C EA6EB8F6 .n.. | B        TView::Idle(long)
0001C1A0 EA6EB8DA .n.. | B        TView::DrawHiliting()
0001C1A4 EA69D5CF .i.. | B        TPolygonView::DrawHilitedData()
0001C1A8 EA69EE80 .i.. | B        TPolygonView::HandleHilite(TUnitPublic*, long, unsigned char)
0001C1AC EA69EE8D .i.. | B        TPolygonView::HandleScrub(const TRect&, long, TUnitPublic*, unsigned char)
0001C1B0 EA6A6218 .jb. | B        TView::Hilited()
0001C1B4 EA69D9D1 .i.. | B        TPolygonView::DrawHilites(unsigned char)
0001C1B8 EA69FAE2 .i.. | B        TPolygonView::IsCompletelyHilited(RefArg)
0001C1BC EA69F29A .i.. | B        TPolygonView::HiliteAll()
0001C1C0 EA69CD8C .i.. | B        TPolygonView::DeleteHilited(RefArg)
0001C1C4 EA05C714 .... | B        TPolygonView::RemoveHilite(RefArg)
0001C1C8 EA6A72A3 .jr. | B        TView::RemoveAllHilites()
0001C1CC EA6A5DFD .j]. | B        TView::GlobalHiliteBounds(TRect*)
0001C1D0 EA69EA65 .i.e | B        TPolygonView::GlobalHiliteResizeBounds(TRect*)
0001C1D4 EA6A5DFC .j]. | B        TView::GlobalHilitePinnedBounds(TRect*)
0001C1D8 EA6B0308 .k.. | B        TView::PointInHilite(TPoint&)
0001C1DC EA69C124 .i.$ | B        TPolygonView::ClickOptions()
0001C1E0 EA69D9D1 .i.. | B        TPolygonView::DrawScaledData(const TRect&, const TRect&, TRect*)
0001C1E4 EA6A2C69 .j,i | B        TPolygonView::AddDragInfo(TDragInfo*)
0001C1E8 EA6A2C69 .j,i | B        TPolygonView::GetDropData(RefArg, RefArg)
0001C1EC EA6A452C .jE, | B        TView::DragAndDrop(TStrokePublic*, const TRect&, const TRect*, const TRect*, unsigned char, const TDragInfo&, const TRect*)
0001C1F0 EA6AC94E .j.N | B        TView::DrawDragBackground(const TRect&, unsigned char)
0001C1F4 EA6AC94E .j.N | B        TView::DrawDragData(const TRect&)
0001C1F8 EA6B1BF2 .k.. | B        TView::GetClipboardDataBits(TRect*)
0001C1FC EA6A8B4A .j.J | B        TView::AcceptDrop(const TDragInfo&, const TPoint&)
0001C200 EA6A4941 .jIA | B        TView::Drop(RefArg, RefArg, TPoint*)
0001C204 EA6A4536 .jE6 | B        TView::DropMove(RefArg, const TPoint&, const TPoint&, unsigned char)
0001C208 EA6A2C62 .j,b | B        TPolygonView::DropRemove(RefArg)
0001C20C EA6AC94D .j.M | B        TView::DropDone()
0001C210 EA6AC520 .j.. | B        TView::BuildKeyChildList(TViewList*, long, long)
0001C214 EA6F93B6 .o.. | B        TView::SimpleOffset(TPoint, long)
0001C218 EA6EBCE4 .n.. | B        TView::PreDraw(TRect&)
0001C21C EA6EBCE2 .n.. | B        TView::PostDraw(TRect&)
0001C220 EA6A0F64 .j.d | B        TPolygonView::RealDraw(TRect&)
0001C224 EA6A1399 .j.. | B        TPolygonView::Scale(const TRect&, const TRect&)
0001C228 EA6A8B35 .j.5 | B        TView::EndDrag(const TDragInfo&, TView*, const TPoint&, const TPoint&, const TPoint&, unsigned char)
0001C22C EA6A451F .jE. | B        TView::DragFeedback(const TDragInfo&, const TPoint&, unsigned char)
0001C230 EA6A5DDB .j]. | B        TView::GetSupportedDropTypes(const TPoint&)
0001C234 EA6A559B .jU. | B        TView::FindDropView(const TDragInfo&, const TPoint&)
0001C238 EA69F270 .i.p | B        TDataView::HandleTap(TPoint&)
0001C23C EA69EE55 .i.U | B        TDataView::HandleCaret(unsigned long, long, TPoint&, TPoint&, TPoint&, TPoint&)
0001C240 EA69EE63 .i.c | B        TDataView::HandleLineGesture(long, TPoint&, TPoint&)
0001C244 EA6AD58E .j.. | B        TDataView::HandleInk(RefArg, unsigned char)
0001C248 EA6A5DE7 .j]. | B        TDataView::HandleInkWord(RefArg, unsigned char)
0001C24C EA69B49D .i.. | B        TPolygonView::AddHilited(RefArg, TEditView*)
0001C250 EA6A0710 .j.. | B        TDataView::PointOverHilitedText(TPoint&)
0001C254 EA6A0712 .j.. | B        TDataView::PointOverText(TPoint&, TPoint*)
0001C258 EA69E61C .i.. | B        TDataView::GetHiliteView()
0001C25C EA6A59AE .jY. | B        TDataView::GetEnclosingEditView()
0001C260 EA69EA38 .i.8 | B        TDataView::GetTextView()
0001C264 EA69F26B .i.k | B        TDataView::HandleWord(const unsigned short*, unsigned long, const TRect&, const TPoint&, unsigned long, unsigned long, RefArg, unsigned char, long*, TUnitPublic*)
0001C268 EA69F27C .i.| | B        TDataView::HiliteText(long, long, unsigned char)
0001C26C EA6A1384 .j.. | B        TDataView::SaveAddedUnitBounds(const TRect&, const TPoint&, unsigned long)
0001C270 EA69EA25 .i.% | B        TDataView::GetProperties(RefArg)
0001C274 EA69C0F8 .i.. | B        TDataView::CleanupData()
0001C278 EA69E60A .i.. | B        TDataView::GetContext()
'
class CPolygonView : public CDataView
{
public:
	UndefRes	AddHilite(CPolygonHilite*);
	UndefRes	AddHilited(const RefVar&, CEditView*);
	UndefRes	DeleteHilited(const RefVar&);

	UndefRes	ClickOptions(void);

	void		realDraw(TRect&);
	void		drawData(PolygonShape*, TPoint*, TPoint*);
	UndefRes	DrawHilitedData(void);
	UndefRes	DrawHilites(unsigned char);
	UndefRes	DrawScaledData(const TRect&, const TRect&, TRect*);

	UndefRes	GlobalHiliteResizeBounds(TRect*);
	UndefRes	HandleHilite(CUnit*, long, unsigned char);
	UndefRes	HandleScrub(const TRect&, long, CUnit*, unsigned char);
	UndefRes	ScrubSegment(const TRect&, unsigned char);
	UndefRes	CalcHiliteBounds(PolygonShape*, TRect*);

	UndefRes	HiliteAll(void);
	UndefRes	HiliteTraced(CUnit*, unsigned char);
	UndefRes	IsCompletelyHilited(const RefVar&);
	UndefRes	MakeHilite(long, long, long, long);
	UndefRes	MakeInkHilite(void);

	UndefRes	RealDoCommand(const RefVar&);
	UndefRes	points(void);
	UndefRes	RemovePoints(TPoint*, TPoint*, long, long, long, long);
	UndefRes	Scale(const TRect&, const TRect&);
	UndefRes	UpdateBounds(PolygonShape*);
	UndefRes	GetArcBounds(TRect&);
	UndefRes	SetArcBounds(const TRect&);
	UndefRes	OuterBounds(TRect*);
	UndefRes	HitSegment(const TRect&, long*, long*);

	UndefRes	AddDragInfo(CDragInfo*);
	UndefRes	GetDropData(const RefVar&, const RefVar&);
	UndefRes	DropRemove(const RefVar&);
};


Ref
CPolygonView::points(void)
{
	return getProto(SYMA(points));
}


void
CPolygonView::realDraw(Rect& inRect)
{
	CDataPtr data(points());
	drawData((char *)data, NULL, NULL);
}


void
CPolygonView::drawData(PolygonShape * inData, TPoint * inPt1, TPoint * inPt2)
{
//	promising -- does something with 'ink
	r5 = inData
	r4 = inPt1
	r3 = inPt2
	//sp-04

	sp00 = f10->f00;
	size_t pnSize = getPenSize();
	PenSize(pnSize, pnSize);
	if (inData->fSize == 14)
	{
		//sp-08
		RefVar ink(getProto(SYMA(ink)));
		GrafPtr thePort;
		GetPort(&thePort);
		bool isPrinter = (thePort->fPixMapFlags & kPixMapDeviceType) != kPixMapDevScreen;
		if (!isPrinter)
		{
			int index
			PathsHandle * paths = InkMakePaths(ink, viewBounds.left, viewBounds.top);
			for (pathsHandle = *paths; *pathsHandle != NULL; bleagh...)
				FramePaths(pathsHandle);
				DisposePaths(pathsHandle);
			free(r6);
		}
		else
		{
			bool r5 = false;
			//sp-08
			GrafPtr thePort;		// sp00
			GetPort(&thePort);
			RgnHandle sp04 = thePort->visRgn;
			if ((*sp04)->rgnSze == 12
			&& (GetPort(&thePort), thePort->grafProcs != NULL)
			  && CheckPic() == 0)
				r5 = Encloses((*sp04)->rgnBounds, viewBounds);
			InkDraw(ink, pnSize, viewBounds.left, viewBounds.top, r5);
		}
	}
}

