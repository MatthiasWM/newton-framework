/*----------------------------------------------------------------------	NTK functions used at build time.	Since this is a custom part, we need a custom partframe.----------------------------------------------------------------------*/partData := {	externalFunctions:  {		// plain C functions will be substituted by ResMaker		DefineGlobalConstant: 'FDefineGlobalConstant,		UnDefineGlobalConstant: 'FUnDefineGlobalConstant,		DefPureFn: 'FDefPureFn,		StuffHex: 'FStuffHex,		ReadStreamFile: 'FReadStreamFile,		LoadDataFile: 'FLoadDataFile		// we may add others like GetProjectInfo, GetPartInfo, etc	},	constantFunctions: {/*		// localization		LocObj: func(obj, path) begin			if not vars.kSyntaxCheck then begin				if not vars.locRoot exists then					Throw('|evt.ex.msg|, "No localization frame specified.");				if not locRoot.english exists then					locRoot.english := {};				if locRoot.english.(path) exists then begin					local pp := locRoot.english.(path);					if ClassOf(obj) = 'string and ClassOf(pp) = 'string and Length(obj) <> Length(pp) then begin						local err := Stringer(foreach x in path collect x & ".");						err[length(err) div 2 - 2] := $ ;						Throw('|evt.ex.msg|, "Localization string for path '" & err & " redefined as: " & obj)					end				end;				locRoot.english.(path) := obj;				if locRoot.(language) exists then begin					if locRoot.(language).(path) exists then						locRoot.(language).(path)	// this is the expression thatâ€™s returned					else						Throw('|evt.ex.msg|, "Localization frame for " & language & " has no entry at " & path)				end else					Throw('|evt.ex.msg|, "Localization frame has no entry for language " & language)			end		end,		GetDateStringSpec: func(elemArray) begin			local spec := 0;			foreach val in elemArray do				spec := spec << 6 + val[1] << 3 + val[0];			spec		end,		// build		GetLayout: func(filename) begin			if not vars.kSyntaxCheck then				try					call Compile("|Layout_" & filename & "|") with ()				onexception |evt.ex| do					Throw('|evt.ex.msg|, "The file " & filename & " has not been processed yet.")		end,		// text style		tsSize: func(num)	num << 10,		// view frames		vfPen: func(x)		x << 8,		vfInset: func(x)	x << 16,		vfShadow: func(x)	x << 18,		vfRound: func(x)	x << 24,		// view fx		fxColumns: func(num)		 num - 1,		fxRows: func(num)			(num - 1) << 5,		fxSteps: func(num)		(num - 1) << 21,		fxStepTime: func(num)	 num << 25,		ButtonBounds: func(width) begin			if width > 0 then				SetBounds(7, 2, 7 + width, 15)			else				SetBounds(25, 2, 25 - width, 15)		end,		PictBounds: func(rsrcName, l, t) begin			local pict := GetNamedResource("PICT", rsrcName, 'rawPICT);			if pict then				SetBounds(l, t, l + ExtractWord(pict, 8) - ExtractWord(pict, 4), t + ExtractWord(pict, 6) - ExtractWord(pict, 2))		end*//* these are added by the installer		// units		UnitReference: func(unitName, memberName) begin			_UnitManager:Dispatch('UnitReference, [unitName, memberName])		end,		UR: func(unitName, memberName) begin			_UnitManager:Dispatch('UnitReference, [unitName, memberName])		end,		// bounds		pureRelBounds: func(l, t, w, h)	{left: l, top: t, right: l + w, bottom: t + h},		pureSetBounds: func(l, t, r, b)	{left: l, top: t, right: r,     bottom: b},*/	},	scripts: {		formInstallScript: func(partFrame) begin			local extras := vars.extras;			if IsArray(extras) then begin				foreach one in extras do begin					if one.app = partFrame.app then begin						GetRoot():Notify(kNotifyAlert, "Extras Drawer", "The application you just installed conflicts with another application. Please contact the application vendor for an updated version.");						break					end				end			end;			if HasSlot(partFrame, 'devInstallScript) then begin				partFrame:devInstallScript(partFrame);				partFrame.devInstallScript := nil			end;			partFrame.InstallScript := nil		end,		formRemoveScript: func(removeFrame) begin			if HasSlot(removeFrame, 'devRemoveScript) then				removeFrame:devRemoveScript(removeFrame)			// no point making it nil, package is going anyway		end,		autoInstallScript: func(partFrame, removeFrame) begin			removeFrame := EnsureInternal({RemoveScript:partFrame.devRemoveScript});			partFrame:devInstallScript(partFrame, removeFrame);	// dev can add extra slots to removeFrame			removeFrame		end	}};